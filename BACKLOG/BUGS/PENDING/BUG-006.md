# BUG-006: Memory leak - timeout Calendar sans cleanup

**Type:** Bug
**Statut:** A faire
**Priorite:** Haute
**Complexite:** XS
**Tags:** pwa, perf
**Date creation:** 2026-02-12

---

## Description

Le composant Calendar utilise des `setTimeout` via `undoTimeoutRef` pour l'annulation de drag & drop. Ces timeouts ne sont pas nettoyes quand l'utilisateur quitte la page avant leur expiration, causant un memory leak potentiel.

## Criteres d'acceptation

- [ ] useEffect cleanup ajoutee pour clearTimeout dans Calendar
- [ ] Pas de fuite memoire quand on quitte la page calendrier

## Fichiers concernes

- `apps/pwa/src/pages/Calendar.tsx:277,348,431` - undoTimeoutRef

## Analyse / Approche

```typescript
// Ajouter un useEffect de cleanup
useEffect(() => {
  return () => {
    if (undoTimeoutRef.current) {
      clearTimeout(undoTimeoutRef.current);
    }
  };
}, []);
```

## Tests de validation

- [ ] Naviguer vers Calendar, faire un drag, quitter avant undo â†’ pas d'erreur console
- [ ] Pas de warning React sur unmounted component
