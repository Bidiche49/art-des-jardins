# IMP-023: Remplacer process.env direct par ConfigService API

**Type:** Improvement
**Statut:** A faire
**Priorite:** Moyenne
**Complexite:** XS
**Tags:** api
**Date creation:** 2026-02-12

---

## Description

Acces direct a `process.env` dans plusieurs fichiers au lieu d'utiliser `ConfigService` de NestJS. Les valeurs ne sont pas validees, pas typees, et les tests sont difficiles (pas de mock possible).

## Criteres d'acceptation

- [ ] Tous les `process.env.XXX` remplaces par `configService.get('XXX')`
- [ ] ConfigService injecte la ou necessaire
- [ ] Tests mockent ConfigService au lieu de process.env

## Fichiers concernes

- `apps/api/src/main.ts:64,65,80` - process.env.NODE_ENV, CORS_ORIGINS
- `apps/api/src/modules/photos/photos.service.ts:235` - process.env direct
- `apps/api/src/modules/pdf/pdf.service.ts:74` - SIRET hardcode

## Analyse / Approche

```typescript
// Avant
origin: process.env.NODE_ENV === 'production' ? ... : ...

// Apres (dans main.ts, utiliser app.get)
const configService = app.get(ConfigService);
const isProd = configService.get('NODE_ENV') === 'production';
```

## Tests de validation

- [ ] `grep -rn "process.env" apps/api/src/ --include="*.ts" | grep -v node_modules | grep -v test` â†’ 0 resultats (ou justifies)
- [ ] App demarre correctement
- [ ] Tests passent
