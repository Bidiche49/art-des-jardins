# IMP-027: Ameliorer gestion d'erreurs PWA (toasts)

**Type:** Improvement
**Statut:** A faire
**Priorite:** Moyenne
**Complexite:** S
**Tags:** pwa, ux
**Date creation:** 2026-02-12

---

## Description

La gestion d'erreurs dans la PWA est inconsistante. Certaines erreurs sont silencieusement loggees en console sans feedback utilisateur. Les catch blocks utilisent `any` et ne remontent pas toujours l'erreur a l'UI.

L'utilisateur ne sait pas si une operation a echoue.

## Criteres d'acceptation

- [ ] Tous les catch blocks affichent un toast d'erreur
- [ ] Les erreurs sont typees (pas de `catch(error: any)`)
- [ ] Pattern uniforme pour la gestion d'erreurs
- [ ] Les erreurs reseau sont differenciees des erreurs metier

## Fichiers concernes

- `apps/pwa/src/pages/Absences.tsx:99,132` - catch avec any
- `apps/pwa/src/db/offlineApi.ts:32,84,121` - console.warn silencieux
- Tous les composants avec try/catch

## Analyse / Approche

```typescript
// Pattern uniforme
try {
  await operation();
  toast.success('Operation reussie');
} catch (error) {
  const message = error instanceof Error ? error.message : 'Erreur inconnue';
  toast.error(message);
  logger.error('Operation failed:', error);
}
```

Optionnel : creer un `handleApiError(error)` centralise qui gere les cas 401, 403, 500, offline.

## Tests de validation

- [ ] Simuler une erreur reseau → toast visible
- [ ] Erreur 400 API → toast avec message clair
- [ ] Erreur 500 API → toast "Erreur serveur"
- [ ] Pas de catch silencieux dans le code
