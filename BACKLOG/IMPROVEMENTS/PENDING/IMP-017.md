# IMP-017: Ajouter lazy loading sur les routes PWA

**Type:** Improvement
**Statut:** A faire
**Priorite:** Haute
**Complexite:** S
**Tags:** pwa, perf
**Date creation:** 2026-02-12

---

## Description

Toutes les 20+ pages de la PWA sont importees de maniere synchrone dans `App.tsx` (lignes 9-38). Le bundle initial contient tout le code de toutes les pages, meme celles rarement visitees. Impact direct sur le temps de chargement initial.

## Criteres d'acceptation

- [ ] Toutes les pages importees avec `React.lazy()`
- [ ] `Suspense` avec fallback loading pour chaque route
- [ ] Bundle initial reduit significativement
- [ ] Navigation entre pages fluide (pas de flash blanc)
- [ ] Build OK, pas de regression

## Fichiers concernes

- `apps/pwa/src/App.tsx:9-38` - imports synchrones a remplacer

## Analyse / Approche

```typescript
import { lazy, Suspense } from 'react';
import { LoadingOverlay } from './components/ui/LoadingOverlay';

const Dashboard = lazy(() => import('./pages/Dashboard'));
const Calendar = lazy(() => import('./pages/Calendar'));
const DevisBuilder = lazy(() => import('./pages/DevisBuilder'));
// ... toutes les pages

// Dans le Router
<Route index element={
  <Suspense fallback={<LoadingOverlay />}>
    <Dashboard />
  </Suspense>
} />
```

Optionnel : preload les routes au hover des liens de navigation.

## Tests de validation

- [ ] Build OK
- [ ] `pnpm build && ls -la dist/assets/` â†’ plusieurs chunks JS (pas un seul gros)
- [ ] Navigation entre pages fonctionne
- [ ] Pas de flash blanc lors du chargement d'une page
- [ ] Lighthouse Performance score ameliore
