# IMP-010: Supprimer tous les console.log en production

**Type:** Improvement
**Statut:** A faire
**Priorite:** Haute
**Complexite:** S
**Tags:** api, pwa, perf
**Date creation:** 2026-02-12

---

## Description

42+ occurrences de `console.log`, `console.error`, `console.warn` dans la PWA et 4 dans l'API. En production, ces logs exposent des infos de debug, degradent les performances et ne sont pas collectes par le systeme de logging structure (Pino pour l'API).

## Criteres d'acceptation

- [ ] API : tous les console.* remplaces par le Logger NestJS
- [ ] PWA : service logger cree avec guard `import.meta.env.DEV`
- [ ] PWA : tous les console.* remplaces par logger.*
- [ ] Aucun console.log/warn/error restant dans le code source (hors tests)
- [ ] Regle ESLint `no-console` activee (warn en dev, error en CI)

## Fichiers concernes

### API (4 occurrences)
- `apps/api/src/common/interceptors/audit.interceptor.ts:47,64`
- `apps/api/src/modules/integrations/integrations.controller.ts:125,217`

### PWA (42+ occurrences)
- `apps/pwa/src/pages/Login.tsx:56`
- `apps/pwa/src/hooks/usePWAUpdate.ts:12,15`
- Et 39+ autres fichiers

## Analyse / Approche

### API - Utiliser le Logger NestJS
```typescript
private readonly logger = new Logger(AuditInterceptor.name);
// Avant: console.error('Failed to log audit:', err);
// Apres: this.logger.error('Failed to log audit', err.stack);
```

### PWA - Creer un service logger
```typescript
// src/services/logger.ts
export const logger = {
  log: (...args: unknown[]) => import.meta.env.DEV && console.log(...args),
  error: (...args: unknown[]) => import.meta.env.DEV && console.error(...args),
  warn: (...args: unknown[]) => import.meta.env.DEV && console.warn(...args),
};
```

## Tests de validation

- [ ] `grep -r "console\.\(log\|warn\|error\)" apps/api/src/ --include="*.ts" | grep -v test | grep -v spec` → 0 resultats
- [ ] `grep -r "console\.\(log\|warn\|error\)" apps/pwa/src/ --include="*.ts" --include="*.tsx" | grep -v test` → 0 resultats
- [ ] Build API et PWA OK
- [ ] Pas de logs parasites en console navigateur en mode prod
