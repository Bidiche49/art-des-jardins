# IMP-063: Sync offline visible et resilient

**Type:** Improvement
**Statut:** A faire
**Priorite:** Critique
**Complexite:** L
**Tags:** offline, sync, ux
**Date creation:** 2026-02-25

---

## Description

Sync queue invisible (pendingSyncCountProvider existe mais jamais affiche). Offline banner disparait au scroll. Pas de badge sync par item. Conflits silencieux (409 â†’ item reste en "pending" sans notification). AejConnectionIndicator (10px) trop petit.

## Findings associes

- STATE-013: Sync queue invisible
- STATE-014: Conflit sync sans resolution intuitive
- STATE-015: Pas d'indicateur "sync en cours"
- TERRAIN-009: Indicateur connexion trop petit (10px)
- TERRAIN-010: Offline banner masquee apres scroll
- TERRAIN-011: Pas d'indication sync status par donnee
- TERRAIN-018: Pas d'indicateur sync par intervention card
- TERRAIN-019: Pas de timeouts explicites sur requetes

## Criteres d'acceptation

- [ ] Badge sync count visible dans AppBar (icone cloud_upload + nombre)
- [ ] Offline banner epinglee en haut (ne disparait pas au scroll)
- [ ] Icone cloud_off sur chaque card non synchronisee
- [ ] Page conflits accessible depuis settings ou notification auto
- [ ] Snackbar "Sync complete: +X modifs" apres sync auto reussie
- [ ] Timeouts explicites (connect 5s, receive 10s)
- [ ] Indicateur connexion agrandi (12px + label optionnel)

## Fichiers concernes

- `apps/mobile/lib/services/sync/sync_providers.dart`
- `apps/mobile/lib/shared/widgets/aej_offline_banner.dart`
- `apps/mobile/lib/shared/widgets/aej_connection_indicator.dart`
- `apps/mobile/lib/shared/layouts/app_shell.dart`
- `apps/mobile/lib/core/network/dio_client.dart`
